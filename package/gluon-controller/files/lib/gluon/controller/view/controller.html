<%-
	local ubus = require 'ubus'
	local unistd = require 'posix.unistd'
	local util = require 'gluon.util'
	local uci = require('simple-uci').cursor()

	local hostname = 'localhost'
	local remotes = {}

	uci:foreach('gluon-controller', 'remote', function(remote)
		table.insert(remotes, remote)
	end)
-%>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, user-scalable=no" />

		<title><%| nodeinfo.hostname %> - <%:Status%></title>

		<link rel="stylesheet" href="/static/controller.css" type="text/css" />
	</head>
	<body data-node-address="<%| http:getenv('SERVER_ADDR') %>">
		<div class="container">
			<div class="sidebar">
				<% for _, remote in pairs(remotes) do %>
				<h2><%| remote.name %></h2>
				<a href="#" onclick="document.getElementById('content').src = 'http://<%| hostname %>:<%| 37000+remote.index %>/'">Config Mode</a>
				<a href="#" onclick="document.getElementById('content').src = 'http://[<%| remote.address %>]/'">Status Page</a>
				<% end %>
			</div>
			<div class="content">
				<iframe id="content" src="http://localhost:12346/" title="W3Schools Free Online Web Tutorials"></iframe>
			</div>
		</div>

	</body>
</html>
