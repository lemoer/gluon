!function(){var h={};function a(e){return/^-?\d+$/.test(e)?+e:NaN}function i(e){return/^-?\d*\.?\d+?$/.test(e)?+e:NaN}var o={integer:function(){return!isNaN(a(this))},uinteger:function(){return 0<=a(this)},float:function(){return!isNaN(i(this))},ufloat:function(){return 0<=i(this)},ipaddr:function(){return o.ip4addr.apply(this)||o.ip6addr.apply(this)},ip4addr:function(){var e;return!!(e=this.match(/^(\d{1,3})\.(\d{1,3})\.(\d{1,3})\.(\d{1,3})$/))&&(0<=e[1]&&e[1]<=255&&0<=e[2]&&e[2]<=255&&0<=e[3]&&e[3]<=255&&0<=e[4]&&e[4]<=255)},ip6addr:function(){return this.indexOf("::")<0?null!=this.match(/^(?:[a-f0-9]{1,4}:){7}[a-f0-9]{1,4}$/i):!(0<=this.indexOf(":::")||this.match(/::.+::/)||this.match(/^:[^:]/)||this.match(/[^:]:$/))&&(!!this.match(/^(?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}$/i)||(!!this.match(/^(?:[a-f0-9]{1,4}:){7}:$/i)||!!this.match(/^:(?::[a-f0-9]{1,4}){7}$/i)))},wpakey:function(){var e=this;return 64==e.length?null!=e.match(/^[a-f0-9]{64}$/i):8<=e.length&&e.length<=63},range:function(e,t){var n=i(this);return+e<=n&&n<=+t},min:function(e){return i(this)>=+e},max:function(e){return i(this)<=+e},irange:function(e,t){var n=a(this);return+e<=n&&n<=+t},imin:function(e){return a(this)>=+e},imax:function(e){return a(this)<=+e},minlength:function(e){return+e<=(""+this).length},maxlength:function(e){return(""+this).length<=+e},domain:function(){return null!=this.match(/^[a-zA-Z0-9][a-zA-Z0-9\-\.]*$/)},email:function(){var e=""+this,t=e.indexOf("@");if(-1==t||t<1)return!1;t=e.substr(t+1);return o.domain.apply(t)}};function d(e){for(var t,n,a,i=0;i<e.length;i++){var r,o=!0;for(r in e[i])o=o&&(t=r,n=e[i][r],a=void 0,(a=document.getElementById(t))?("checkbox"==a.type?a.checked:a.value||"")==n:!!(a=document.getElementById(t+"."+n))&&("radio"==a.type&&a.checked));if(o)return 1}}function v(){window.dispatchEvent(new Event("gluon-update"));var e,t=!1;for(e in h){var n=h[e],a=document.getElementById(e),i=document.getElementById(n.parent);if(a&&a.parentNode&&!d(n.deps))a.parentNode.removeChild(a),a.dispatchEvent(new Event("gluon-hide")),t=!0;else if(i&&(!a||!a.parentNode)&&d(n.deps)){for(var r=void 0,r=i.firstChild;r&&!(r.getAttribute&&parseInt(r.getAttribute("data-index"),10)>n.index);r=r.nextSibling);r?i.insertBefore(n.node,r):i.appendChild(n.node),n.node.dispatchEvent(new Event("gluon-show")),t=!0}i&&i.parentNode&&i.getAttribute("data-optionals")&&(i.parentNode.style.display=i.options.length<=1?"none":"")}t&&v()}function m(e,t,n,a){return e.addEventListener?e.addEventListener(t,n,!!a):e.attachEvent("on"+t,function(){var e=window.event;return!e.target&&e.srcElement&&(e.target=e.srcElement),!!n(e)}),e}function g(t,n,e){var a,i,r=(i=(e=e).match(/^([^\(]+)\(([^,]+),([^\)]+)\)$/))&&void 0!==(a=o[i[1]])?function(){return a.apply(this,[i[2],i[3]])}:(i=e.match(/^([^\(]+)\(([^,\)]+)\)$/))&&void 0!==(a=o[i[1]])?function(){return a.apply(this,[i[2]])}:o[e];r&&(e=function(){var e;t.form&&(t.className=t.className.replace(/ gluon-input-invalid/g,""),0==(e=(t.options&&-1<t.options.selectedIndex?t.options[t.options.selectedIndex]:t).value).length&&n||r.apply(e)||(t.className+=" gluon-input-invalid"))},m(t,"blur",e),m(t,"keyup",e),m(t,"gluon-revalidate",e),"select"==t.nodeName.toLowerCase()&&(m(t,"change",e),m(t,"click",e)),e())}!function(){for(var e,t,n,a,i=document.querySelectorAll("[data-depends]"),r=0;void 0!==(p=i[r]);r++){var o=parseInt(p.getAttribute("data-index"),10),d=JSON.parse(p.getAttribute("data-depends"));if(!isNaN(o)&&0<d.length)for(var u=0;u<d.length;u++)e=p,t=d[u],n=o,a=void 0,(a=h[e.id])||(a={node:e,parent:e.parentNode.id,deps:[],index:n},h[e.id]=a),a.deps.push(t)}for(i=document.querySelectorAll("[data-update]"),r=0;void 0!==(p=i[r]);r++)for(var l,s=p.getAttribute("data-update").split(" "),c=0;void 0!==(l=s[c]);c++)m(p,l,function(){setTimeout(v,0)});for(i=document.querySelectorAll("[data-type]"),r=0;void 0!==(p=i[r]);r++)g(p,"true"===p.getAttribute("data-optional"),p.getAttribute("data-type"));i=document.querySelectorAll("[data-dynlist]");for(var p,r=0;void 0!==(p=i[r]);r++){var f=JSON.parse(p.getAttribute("data-dynlist"));!function(l,s){var c=s.prefix;function o(e,t,n){for(var a=[];l.firstChild;){var i=l.firstChild;(r=+i.index)!=n&&("input"==i.nodeName.toLowerCase()?a.push(i.value||""):"select"==i.nodeName.toLowerCase()&&(a[a.length-1]=i.options[i.selectedIndex].value)),l.removeChild(i)}0<=t?(e=t+1,a.splice(t,0,"")):s.optional||0!=a.length||a.push("");for(var r=1;r<=a.length;r++){var o,d,u=document.createElement("input");u.id=c+"."+r,u.name=c,u.value=a[r-1],u.type="text",u.index=r,s.size&&(u.size=s.size),s.placeholder&&(u.placeholder=s.placeholder),l.appendChild(u),s.type&&g(u,!1,s.type),m(u,"keydown",f),m(u,"keypress",p),r==e?u.focus():-r==e&&(u.focus(),o=u.value,u.value=" ",u.value=o),(s.optional||1<a.length)&&((d=document.createElement("span")).className="gluon-remove",l.appendChild(d),m(d,"click",h(!1)),l.appendChild(document.createElement("br")))}(d=document.createElement("span")).className="gluon-add",l.appendChild(d),m(d,"click",h(!0))}function p(e){var t=(e=e||window.event).target||e.srcElement;switch(3==t.nodeType&&(t=t.parentNode),e.keyCode){case 8:case 46:return 0==t.value.length?(e.preventDefault&&e.preventDefault(),!1):!0;case 13:case 38:case 40:return e.preventDefault&&e.preventDefault(),!1}return!0}function f(e){var t,n,a=(e=e||window.event).target||e.srcElement,i=0;if(a){for(i=(a=3==a.nodeType?a.parentNode:a).index,t=a.previousSibling;t&&t.name!=c;)t=t.previousSibling;for(n=a.nextSibling;n&&n.name!=c;)n=n.nextSibling}switch(e.keyCode){case 8:case 46:if("select"!=a.nodeName.toLowerCase()&&0!=a.value.length)break;e.preventDefault&&e.preventDefault();var r=a.index;return o(r=8==e.keyCode?1-r:r,-1,i),!1;case 13:o(-1,i,-1);break;case 38:t&&t.focus();break;case 40:n&&n.focus()}return!0}function h(n){return function(e){for(var t=((e=e||window.event).target||e.srcElement).previousSibling;t&&t.name!=c;)t=t.previousSibling;return n?f({target:t,keyCode:13}):(t.value="",f({target:t,keyCode:8})),!1}}o(NaN,-1,-1)}(p,f)}v()}()}();